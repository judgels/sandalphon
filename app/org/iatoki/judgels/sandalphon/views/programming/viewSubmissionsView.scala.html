@(currentPage: org.iatoki.judgels.commons.Page[org.iatoki.judgels.commons.Submission], problemId: Long, currentSortBy: String, currentOrder: String, currentFilter: String)

@import play.i18n.Messages
@import org.iatoki.judgels.commons.views.html.pagination.tablePagination
@import org.iatoki.judgels.commons.views.html.pagination.tableHeader
@import org.iatoki.judgels.commons.views.html.pagination.link

@import org.iatoki.judgels.sandalphon.controllers.routes
@import org.iatoki.judgels.sandalphon.SandalphonUtils

@shortLink(newPage: scala.Long, newSortBy: String) = {@link(currentSortBy, true, currentOrder, currentFilter, newPage, newSortBy, routes.ProgrammingProblemController.list)}

<form class="form form-inline pull-right" action='@routes.ProgrammingProblemController.list(currentPage.getPageIndex, "../../../../../../../../judgels-play-commons/public", "../../../../../../../../judgels-play-commons/public", "../../../../../../../../judgels-play-commons/public")' method="GET">
  <input type="hidden" name="orderBy" value="@currentOrder"/>
  <input type="hidden" name="sortBy" value="@currentSortBy"/>

</form>

<div class="clearfix"></div>

<div class="table-responsive">
  <table class="table table-hover table-condensed table-bordered">
    <tr>
      @tableHeader("id", Messages.get("commons.field.id"), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), "id"))
      @tableHeader("author", Messages.get("Author"), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), "author"))
      @tableHeader("time", Messages.get("Time"), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), "time"))
      @tableHeader("verdict", Messages.get("Verdict"), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), "verdict"))
      @tableHeader("score", Messages.get("Score"), currentSortBy, currentOrder, shortLink(currentPage.getPageIndex(), "score"))
      <th></th>
    </tr>
    @for(page <- currentPage.getList()) {
      <tr>
        <td>@page.getId</td>
        <td>@page.getAuthorJid</td>
        <td>@SandalphonUtils.timestampToFormattedDate(page.getTimestamp)</td>
        <td>@page.getVerdict.getCode - @page.getVerdict.getName</td>
        <td>@page.getScore</td>
        <td class="text-center">
          <a href="@routes.ProgrammingProblemController.viewSubmission(problemId, page.getId)"><span class="glyphicon glyphicon-search"></span></a>
        </td>
      </tr>
    }
  </table>
</div>

@tablePagination(currentPage, currentSortBy, currentOrder, currentFilter, routes.ProgrammingProblemController.list)